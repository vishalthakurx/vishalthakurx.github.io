<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Panel - Vishal Thakur</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(120deg, #e0eafc 0%, #cfdef3 100%);
            color: #222;
            margin: 0;
            min-height: 100vh;
        }
        .topbar {
            background: #2c3e50;
            color: #fff;
            padding: 18px 0 16px 0;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 1px;
            box-shadow: 0 2px 8px rgba(44,62,80,0.08);
            display: flex;
            align-items: center;
            justify-content: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }
        .topbar .logo {
            font-size: 1.7rem;
            margin-right: 12px;
            color: #2ecc71;
        }
        .logout-btn {
            margin-left: auto;
            margin-right: 24px;
            background: #e74c3c;
            color: #fff;
            border: none;
            padding: 8px 18px;
            border-radius: 5px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.2s;
        }
        .logout-btn:hover {
            background: #c0392b;
        }
        .container {
            max-width: 540px;
            margin: 40px auto;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(44,62,80,0.10);
            padding: 36px 32px 32px 32px;
        }
        h2 {
            color: #2c3e50;
            margin-top: 0;
            font-size: 2rem;
            letter-spacing: 1px;
            text-align: center;
        }
        form {
            margin-bottom: 0;
        }
        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: #34495e;
        }
        input[type="text"], input[type="password"], input[type="email"], select {
            width: 100%;
            padding: 11px 12px;
            margin-bottom: 16px;
            border: 1px solid #dbeafe;
            border-radius: 6px;
            font-size: 1rem;
            background: #f8fafc;
            transition: border 0.2s;
        }
        input:focus, select:focus {
            border: 1.5px solid #3498db;
            outline: none;
            background: #eaf6fb;
        }
        button, .admin-tab {
            background: #3498db;
            color: #fff;
            border: none;
            padding: 10px 22px;
            border-radius: 6px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            margin-right: 8px;
            margin-bottom: 8px;
            transition: background 0.2s, box-shadow 0.2s;
            box-shadow: 0 2px 8px rgba(52,152,219,0.07);
        }
        button:last-child, .admin-tab:last-child {
            margin-right: 0;
        }
        button:hover, .admin-tab:hover {
            background: #217dbb;
        }
        .admin-tab.active {
            background: #2ecc71;
            color: #fff;
        }
        .admin-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 24px;
            justify-content: center;
        }
        .admin-section {
            display: none;
            animation: fadeIn 0.4s;
        }
        .admin-section.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(16px);}
            to { opacity: 1; transform: none;}
        }
        .fadeOut { animation: fadeOut 0.7s forwards; }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; visibility: hidden; } }
        .ecom-list, .user-list {
            margin-bottom: 16px;
        }
        .ecom-list div, .user-list div {
            background: #f8fafc;
            border-radius: 5px;
            padding: 8px 12px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .ecom-list button, .user-list button {
            background: #e74c3c;
            padding: 5px 14px;
            border-radius: 4px;
            font-size: 0.95em;
            margin: 0;
        }
        .ecom-list button:hover, .user-list button:hover {
            background: #c0392b;
        }
        .admin-section h3 {
            margin-top: 0;
            color: #217dbb;
        }
        .info-note {
            font-size: 0.97em;
            color: #888;
            margin-top: 8px;
        }
        @media (max-width: 700px) {
            .container { padding: 18px 6vw 18px 6vw; }
            .topbar { font-size: 1.1rem; }
        }
    </style>
</head>
<body>
    <div class="topbar">
        <span class="logo">üõ†Ô∏è</span> Vishal Thakur Admin Panel
        <button class="logout-btn hidden" id="logout-btn">Logout</button>
    </div>
    <div class="container">
        <h2>Admin Panel</h2>
        <form id="admin-login-form">
            <label for="admin-username">Username:</label>
            <input type="text" id="admin-username" name="admin-username" required autocomplete="username">
            <label for="admin-password">Password:</label>
            <input type="password" id="admin-password" name="admin-password" required autocomplete="current-password">
            <button type="submit">Login</button>
        </form>
        <div id="admin-dashboard" class="hidden">
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="content">Content Editor</button>
                <button class="admin-tab" data-tab="ecom">E-Commerce</button>
                <button class="admin-tab" data-tab="users">User Management</button>
                <button class="admin-tab" data-tab="messages">Messages</button>
                <button class="admin-tab" data-tab="files">Files</button>
                <button class="admin-tab" data-tab="settings">Settings</button>
            </div>
            <div id="admin-content" class="admin-section active">
                <p>Edit the main website by clicking <b>Enable Edit</b>, then <b>Save All</b> to persist changes.</p>
                <button id="enable-edit-btn">Enable Edit</button>
                <button id="save-content-btn">Save All</button>
                <button id="disable-edit-btn">Disable Edit</button>
                <div class="info-note">(Edits apply to the main site. Reload the main site to see changes.)</div>
            </div>
            <div id="admin-ecom" class="admin-section">
                <h3>Manage Services</h3>
                <div id="ecom-list" class="ecom-list"></div>
                <form id="add-service-form">
                    <input type="text" id="service-title" placeholder="Service Title" required>
                    <input type="text" id="service-price" placeholder="Price" required>
                    <input type="text" id="service-upi" placeholder="UPI Link" required>
                    <button type="submit">Add Service</button>
                </form>
            </div>
            <div id="admin-users" class="admin-section">
                <h3>User Management</h3>
                <div id="user-list" class="user-list"></div>
                <form id="add-user-form">
                    <input type="text" id="new-username" placeholder="Username" required>
                    <input type="password" id="new-password" placeholder="Password" required>
                    <button type="submit">Add User</button>
                </form>
            </div>
            <div id="admin-messages" class="admin-section">
                <h3>Messages</h3>
                <div id="messages-list"></div>
                <form id="send-message-form">
                    <input type="text" id="msg-to" placeholder="To (username)" required>
                    <input type="text" id="msg-text" placeholder="Message" required>
                    <button type="submit">Send</button>
                </form>
            </div>
            <div id="admin-files" class="admin-section">
                <h3>Uploaded Files</h3>
                <form id="upload-file-form" enctype="multipart/form-data">
                    <input type="file" id="file-input" name="file" required>
                    <button type="submit">Upload</button>
                </form>
                <ul id="file-list"></ul>
            </div>
            <div id="admin-settings" class="admin-section">
                <h3>Settings</h3>
                <form id="settings-form">
                    <label for="site-title">Site Title:</label>
                    <input type="text" id="site-title" value="Vishal Thakur">
                    <label for="theme-select">Theme:</label>
                    <select id="theme-select">
                        <option value="default">Default</option>
                        <option value="dark">Dark</option>
                    </select>
                    <button type="submit">Save Settings</button>
                </form>
            </div>
        </div>
    </div>
    <script>
    // --- Admin Panel Standalone Functionality (GitHub Pages compatible) ---

    // Content Editor for main site
    function setEditable(enabled) {
        let mainContent = document.getElementById('editable-main-content');
        if (!mainContent) {
            mainContent = document.createElement('div');
            mainContent.id = 'editable-main-content';
            mainContent.style.marginTop = '24px';
            mainContent.style.background = '#f8fafc';
            mainContent.style.border = '1.5px solid #dbeafe';
            mainContent.style.borderRadius = '8px';
            mainContent.style.padding = '18px 16px';
            mainContent.style.minHeight = '200px';
            mainContent.style.maxHeight = '60vh';
            mainContent.style.overflowY = 'auto';
            mainContent.style.fontSize = '1.05em';
            mainContent.innerHTML = localStorage.getItem('mainContent') || '';
            document.querySelector('.container').appendChild(mainContent);
        }
        if (enabled) {
            mainContent.setAttribute('contenteditable', 'true');
            mainContent.focus();
        } else {
            mainContent.removeAttribute('contenteditable');
        }
    }
    function saveContent() {
        let mainContent = document.getElementById('editable-main-content');
        if (mainContent) {
            localStorage.setItem('mainContent', mainContent.innerHTML);
            alert('Content saved! Reload the main site to see changes.');
            mainContent.remove();
        }
    }
    function disableEdit() {
        let mainContent = document.getElementById('editable-main-content');
        if (mainContent) mainContent.removeAttribute('contenteditable');
    }

    // Helpers for localStorage
    function getLS(key, fallback) {
        try {
            return JSON.parse(localStorage.getItem(key)) || fallback;
        } catch { return fallback; }
    }
    function setLS(key, val) {
        localStorage.setItem(key, JSON.stringify(val));
    }

    // User Management (localStorage)
    async function renderUsers() {
        const userList = document.getElementById('user-list');
        const users = getLS('users', []);
        if (userList) {
            userList.innerHTML = users.map((u, i) =>
                `<div><span>${u.username}</span> <button onclick="removeUser('${u.username}')">Remove</button></div>`
            ).join('');
        }
    }
    window.removeUser = function(username) {
        let users = getLS('users', []);
        users = users.filter(u => u.username !== username);
        setLS('users', users);
        renderUsers();
    }
    const addUserForm = document.getElementById('add-user-form');
    if (addUserForm) {
        addUserForm.onsubmit = function(e) {
            e.preventDefault();
            const users = getLS('users', []);
            users.push({ username: this['new-username'].value, password: this['new-password'].value });
            setLS('users', users);
            renderUsers();
            this.reset();
        }
    }

    // E-Commerce Management (localStorage)
    async function renderServices() {
        const ecomList = document.getElementById('ecom-list');
        const services = getLS('products', []);
        if (ecomList) {
            ecomList.innerHTML = services.map((s, i) =>
                `<div>
                    <span><b>${s.name}</b> - ‚Çπ${s.price}</span>
                    <button onclick="removeService('${s.name}')">Remove</button>
                </div>`
            ).join('');
        }
    }
    window.removeService = function(name) {
        let products = getLS('products', []);
        products = products.filter(p => p.name !== name);
        setLS('products', products);
        renderServices();
    }
    const addServiceForm = document.getElementById('add-service-form');
    if (addServiceForm) {
        addServiceForm.onsubmit = function(e) {
            e.preventDefault();
            const products = getLS('products', []);
            products.push({ name: this['service-title'].value, price: this['service-price'].value });
            setLS('products', products);
            renderServices();
            this.reset();
        }
    }

    // Settings (localStorage)
    const settingsForm = document.getElementById('settings-form');
    if (settingsForm) {
        // Load settings
        const settings = getLS('settings', { theme: 'default', siteTitle: 'Vishal Thakur' });
        settingsForm['theme-select'].value = settings.theme || 'default';
        settingsForm['site-title'].value = settings.siteTitle || 'Vishal Thakur';
        settingsForm.onsubmit = function(e) {
            e.preventDefault();
            setLS('settings', {
                theme: this['theme-select'].value,
                siteTitle: this['site-title'].value
            });
            alert('Settings saved!');
        }
    }

    // Messaging (localStorage)
    async function renderMessages() {
        const messages = getLS('messages', []);
        const list = document.getElementById('messages-list');
        list.innerHTML = messages.map(m =>
            `<div><b>${m.from}</b> to <b>${m.to}</b>: ${m.text} <span style="color:#888;font-size:0.9em;">${m.timestamp}</span></div>`
        ).join('');
    }
    const sendMessageForm = document.getElementById('send-message-form');
    if (sendMessageForm) {
        sendMessageForm.onsubmit = function(e) {
            e.preventDefault();
            const messages = getLS('messages', []);
            messages.push({
                from: 'admin',
                to: this['msg-to'].value,
                text: this['msg-text'].value,
                timestamp: new Date().toISOString()
            });
            setLS('messages', messages);
            renderMessages();
            this.reset();
        }
    }

    // File uploads (simulate with localStorage, no real upload)
    const uploadFileForm = document.getElementById('upload-file-form');
    if (uploadFileForm) {
        uploadFileForm.onsubmit = function(e) {
            e.preventDefault();
            const fileInput = document.getElementById('file-input');
            if (fileInput.files.length > 0) {
                const files = getLS('files', []);
                files.push(fileInput.files[0].name);
                setLS('files', files);
                alert('File uploaded: ' + fileInput.files[0].name);
                renderFiles();
            }
        }
    }
    async function renderFiles() {
        const files = getLS('files', []);
        const fileList = document.getElementById('file-list');
        fileList.innerHTML = files.map(f => `<li>${f}</li>`).join('');
    }

    // Tab Switching (add new tabs)
    const adminTabs = document.querySelectorAll('.admin-tab');
    const adminSections = document.querySelectorAll('.admin-section');
    adminTabs.forEach(tab => {
        tab.onclick = function() {
            adminTabs.forEach(t => t.classList.remove('active'));
            adminSections.forEach(s => s.classList.remove('active'));
            tab.classList.add('active');
            document.getElementById('admin-' + tab.dataset.tab).classList.add('active');
            if (tab.dataset.tab === 'messages') renderMessages();
            if (tab.dataset.tab === 'files') renderFiles();
        }
    });

    // Admin Login (localStorage only)
    const adminLoginForm = document.getElementById('admin-login-form');
    const adminDashboard = document.getElementById('admin-dashboard');
    const logoutBtn = document.getElementById('logout-btn');
    if (adminLoginForm && adminDashboard) {
        adminLoginForm.onsubmit = function(e) {
            e.preventDefault();
            const u = this['admin-username'].value;
            const p = this['admin-password'].value;
            const users = getLS('users', []);
            const user = users.find(user => user.username === u && user.password === p);
            if (user || (u === 'admin' && p === 'admin')) {
                adminLoginForm.classList.add('fadeOut');
                setTimeout(() => {
                    adminLoginForm.classList.add('hidden');
                    adminDashboard.classList.remove('hidden');
                    logoutBtn.classList.remove('hidden');
                    renderUsers();
                    renderServices();
                }, 700);
            } else {
                alert('Invalid credentials');
            }
        }
    }
    if (logoutBtn) {
        logoutBtn.onclick = function() {
            location.reload();
        }
    }

    // On load
    window.addEventListener('DOMContentLoaded', () => {
        renderUsers();
        renderServices();
    });
    </script>
</body>
</html>
